---
title: "Basic Mapping File"
author: "Wyatt Hartwig"
date: "XX XXX XXXX"
format: 
  pdf:
    include-in-header: 
       text: |
         \usepackage{fvextra}
         \DefineVerbatimEnvironment{Highlighting}{Verbatim}{breaklines,commandchars=\\\{\}}
include-before-body:
  text: |
    \RecustomVerbatimEnvironment{verbatim}{Verbatim}{
      showspaces = false,
      showtabs = false,
      breaksymbolleft={},
      breaklines
    }
output:
  echo: false
  eval: false
---

```{python}
from itertools import count
from math import nan
import pandas as pd
import matplotlib.pyplot as plt
import os
from pathlib import Path
import pip
import seaborn as sns
import geopandas as gpd
import json
import pyproj
from pyproj import CRS
from pyproj import Proj
from shapely import Point, LineString, Polygon
from shapely.geometry import linestring
import numpy as np
import folium as fol
from folium.plugins import MarkerCluster
#os.chdir('C:\\Users\\wyatt\\student30538-w26\\final-project-whartwig')
base_dir = Path(__file__).resolve().parent.parent
path_raw_data = os.path.join(base_dir, 'Original-Data')
path_cleaned_data = os.path.join(base_dir, 'Cleaned-Data')
```

# Read in cleaned files
```{python}
stl_tracts = gpd.read_file(os.path.join(path_cleaned_data, 'stl_tracts.geojson'))
stl_select = gpd.read_file(os.path.join(path_cleaned_data, 'stl_select.geojson'))
newstl = gpd.read_file(os.path.join(path_cleaned_data, 'newstl.geojson'))
newcounty = gpd.read_file(os.path.join(path_cleaned_data,'newcounty.geojson'))
county_all = gpd.read_file(os.path.join(path_cleaned_data, 'county_all.geojson'))
```
```{python}
#stl_tracts
```


# Mapping
\ 

## Base map
```{python}
#All cencus tracts in current STL City/County
all_tracts = fol.Map(location = [38.625029, -90.186772], tiles='cartodb positron', zoom_start = 10)
fol.GeoJson(stl_tracts, tooltip=fol.GeoJsonTooltip(fields=['COUNTY', 'TRACT', 'POPULATION']),
            popup=fol.GeoJsonPopup(fields=['COUNTY', 'TRACT', 'POPULATION', 'DENSITY']),
            style_function=lambda x: {'fillColor':'blue', 'color':'black', 'weight': 1,
                                      'fillOpacity': 0.1,}).add_to(all_tracts)
all_tracts
```
\ 

## New city cencus tracts
```{python}
#Proposed City in new St. Louis County by Census Tract
new_stl = fol.Map(location = [38.625029, -90.186772], tiles='cartodb positron', zoom_start = 10)
fol.GeoJson(stl_select, tooltip=fol.GeoJsonTooltip(fields=['COUNTY', 'TRACT', 'POPULATION']),
            popup=fol.GeoJsonPopup(fields=['COUNTY', 'TRACT', 'POPULATION', 'DENSITY']),
            style_function=lambda x: {'fillColor':'blue', 'color':'black', 'weight': 1,
                                      'fillOpacity': 0.1,}).add_to(new_stl)
new_stl
```
\ 

## New city and county
```{python}
#New St. Louis City and County Boundry and Stats
stl_next = fol.Map(location = [38.625029, -90.186772], tiles='cartodb positron', zoom_start = 10)
fol.GeoJson(newstl, name='New St. Louis', tooltip=fol.GeoJsonTooltip(fields=['NAME']),
            popup=fol.GeoJsonPopup(fields=['NAME', 'POPULATION', 'SQMI', 'DENSITY']),
            style_function=lambda x: {'fillColor':'blue', 'color':'black', 'weight': 1,
                                      'fillOpacity': 0.1,}).add_to(stl_next)
fol.GeoJson(newcounty, name='New County Without St. Louis',
            tooltip=fol.GeoJsonTooltip(fields=['NAME']),
            popup=fol.GeoJsonPopup(fields=['NAME', 'POPULATION', 'SQMI']),
            style_function=lambda x: {'fillColor':'red', 'color':'black', 'weight': 1,
                                      'fillOpacity': 0.1,}).add_to(stl_next)
fol.GeoJson(county_all, name='New County with St. Louis',
            tooltip=fol.GeoJsonTooltip(fields=['NAME']),
            popup=fol.GeoJsonPopup(fields=['NAME', 'POPULATION', 'SQMI']),
            style_function=lambda x: {'fillColor':'orange', 'color':'black', 'weight': 1,
                                      'fillOpacity': 0.1,}).add_to(stl_next)
fol.LayerControl().add_to(stl_next)
stl_next
```