# GEMINI.md - Project Instructions

## Project Overview
This is a data science and Geographic Information Systems (GIS) project focused on analyzing and visualizing demographics and municipal boundaries in the St. Louis area. The project explores the consolidation of St. Louis city and county through data cleaning, spatial processing, and interactive mapping.

### Main Technologies
- **Language:** Python 3.x
- **Spatial Data:** `geopandas`, `shapely`, `pyproj`
- **Data Manipulation:** `pandas`, `numpy`
- **Visualization:** `altair`, `folium` (interactive maps), `matplotlib`, `seaborn`
- **Reporting:** Quarto (`.qmd` files for generating PDF/HTML reports)
- **Utilities:** `statsmodels` (weighted statistics), `vl-convert-python` (Altair to PNG/PDF conversion)

## Directory Structure
- `data/`: Parent directory for all project data.
  - `raw-data/`: Contains raw datasets, including Census tract CSVs and Shapefiles.
  - `derived-data/`: Contains processed GeoJSON files generated by the cleaning scripts.
- `code/`: Contains Quarto documents and Python scripts for data processing and visualization.
  - `data_cleaning_and_processing.qmd`: The primary data pipeline.
  - `basic_mapping.qmd`: Visualization and mapping logic.
  - `exploration.py`: Exploratory analysis and debt visualization.

## Building and Running

### Prerequisites
Ensure you have Python installed and the following libraries:
```bash
pip install geopandas pandas altair folium statsmodels vl-convert-python shapely pyproj matplotlib seaborn openpyxl
```
You also need [Quarto](https://quarto.org/) installed to render the `.qmd` files.

### Execution
1. **Data Processing:**
   Run the cleaning script to generate the files in `data/derived-data/`:
   ```bash
   quarto render code/data_cleaning_and_processing.qmd
   ```
2. **Visualizations:**
   Render the mapping report:
   ```bash
   quarto render code/basic_mapping.qmd
   ```
   Or run the exploration script:
   ```bash
   python code/exploration.py
   ```

## Development Conventions
- **Data Workflow:** Always keep raw data in `data/raw-data/`. Never modify raw data directly; instead, use scripts in `code/` to output processed versions to `data/derived-data/`.
- **Path Management:** Use `pathlib` and `os.path.join` for cross-platform compatibility. The scripts are designed to resolve paths relative to the project root.
- **Reporting:** Use Quarto for creating reproducible reports. Ensure all Python code blocks in `.qmd` files are well-documented.
- **Mapping:** Use Folium for interactive web-based maps and Altair for statistical charts.
